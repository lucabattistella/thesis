\documentclass[11pt]{amsart}
%\usepackage[english]{babel}
\usepackage{appendix}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{dsfont}
%\usepackage{showlabels}
\usepackage{hyperref}
\usepackage{amsthm}
\usepackage{marginnote}
\usepackage{stmaryrd}
\usepackage{enumitem}
\usepackage[english]{babel}
\usepackage{yfonts}
\usepackage[T1]{fontenc}
\usepackage[utf8x]{inputenc}
%\usepackage{enumerate}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{faktor}
\usepackage{xcolor}
\usepackage{xfrac}
\usepackage{tikz,tikz-cd}
\usetikzlibrary{decorations.pathmorphing,decorations.pathreplacing,patterns}
\usepackage[all]{xy}
\usepackage{bbm}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{tabu}
\usepackage{booktabs}
\usepackage{mathtools}

\def\reduced{\tikz[baseline=-3pt]{
\draw (0,0) circle[radius=2pt]}
}
\def\Dunouno{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\psi$} -- (1,0)node[above]{$H$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunodue{\tikz[baseline=-3pt]{
\draw (0,0)-- (1,0)node[above]{$\psi H$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunotre{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\lambda_1\psi$} -- (1,0);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunoquat{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\lambda_1$} -- (1,0)node[above]{$\psi$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunocin{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\psi^2$} -- (1,0);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunosei{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\psi$} -- (1,0)node[above]{$\psi$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunoset{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,0)node[above]{$\psi^2$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunoott{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\lambda_1^2$} -- (1,0);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunonov{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\lambda_1$} -- (1,0)node[above]{$H$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Dunodiec{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,0)node[above]{$H^2$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,0) circle (2pt)}
}
\def\Ddueuno{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,.3)node[above]{$H$} (0,0)--(1,-.3);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dduedue{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\lambda_1$} -- (1,.3) (0,0)--(1,-.3);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dduetre{\tikz[baseline=-3pt]{
\draw (0,0)node[above]{$\psi$} -- (1,.3) (0,0)--(1,-.3);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dduequat{\tikz[baseline=-3pt]{
\draw (0,0)node[below]{$\psi$} -- (1,.3) (0,0)--(1,-.3);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dduecin{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,.3)node[above]{$\psi$} (0,0)--(1,-.3);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dduesei{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,.3) (0,0)--(1,-.3)node[below]{$\psi$};
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.3) circle (2pt) (1,-.3) circle (2pt)}
}
\def\Dtre{\tikz[baseline=-3pt]{
\draw (0,0) -- (1,.5) (0,0)--(1,-.5) (0,0) -- (1.3,0);
\draw (0,0) circle(2pt)[fill=white];
\fill (1,.5) circle (2pt) (1,-.5) circle (2pt) (1.3,0) circle (2pt)}
}
\newcommand{\pazocal}{\mathcal}
\newcommand{\TT}{\operatorname{T}}
\newcommand{\oM}{\overline{\mathcal{M}}}
\newcommand{\M}[4]{\overline{\mathcal{M}}_{#1,#2}(#3,#4)}
\newcommand{\MK}[4]{\overline{\mathcal{M}}^{\rm{Kim}}_{#1,#2}(#3,#4)}
\newcommand{\Mone}[3]{\overline{\pazocal M}^{(1)}_{1,#1}(#2,#3)}
\newcommand{\VZ}[3]{\mathcal{V\!Z}_{1,#1}(#2,#3)}
\newcommand{\tVZ}[3]{\widetilde{\mathcal{V\!Z}}_{1,#1}(#2,#3)}
\newcommand{\Q}[4]{\mathcal{Q}_{#1,#2}(#3,#4)}
\newcommand{\Qe}[4]{\mathcal{Q}^{\epsilon}_{#1,#2}(#3,#4)}
\newcommand{\Qt}[4]{\widetilde{\mathcal Q}_{#1,#2}(#3,#4)}
\newcommand{\QG}[4]{\mathcal{QG}_{#1,#2}(#3,#4)}
\newcommand{\QGe}[4]{\mathcal{QG}^{\epsilon}_{#1,#2}(#3,#4)}
\newcommand{\PP}{\mathbb P}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\OO}{\mathcal{O}}
\renewcommand{\to}{\rightarrow}
\newcommand{\A}{\mathcal A}
\newcommand{\B}{\mathcal B}
\newcommand{\C}{\mathfrak C}
\newcommand{\F}{\mathcal F}
\newcommand{\EE}{\mathbf{E}}
\renewcommand{\L}{\mathcal L}
\newcommand{\LL}{\mathbf{L}}
\newcommand{\MM}{\mathfrak M}
\newcommand{\Mwt}{\mathfrak M_1^{\textrm{wt}}}
\newcommand{\Aaff}{\mathbb{A}}
\newcommand{\kk}{\Bbbk}
\newcommand{\comp}{\chi}
\newcommand{\sst}{\sigma^{\operatorname{ss}}}
\newcommand{\Pic}{\operatorname{Pic}}
\newcommand{\Def}{\operatorname{Def}}
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\Proj}{\operatorname{Proj}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\Ext}{\operatorname{Ext}}
\newcommand{\val}{\operatorname{val}}
\newcommand{\Gm}{\mathbb{G}_{\text{m}}}
\newcommand{\virt}[1]{[#1]^{\operatorname{vir}}}
\newcommand{\vip}[1]{[#1]^{\operatorname{prod}}}
\newcommand{\redu}[1]{[#1]^{\operatorname{red}}}
\newcommand{\Id}{\operatorname{Id}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\HH}{\operatorname{H}}
\newcommand{\Achow}{\operatorname{A}}
\newcommand{\pt}{\operatorname{pt}}
\newcommand{\lala}{\langle\!\langle}
\newcommand{\rara}{\rangle\!\rangle}
\newcommand{\bq}{\begin{equation}}
\newcommand{\eq}{\end{equation}}
\newcommand{\ba}{\begin{aligned}}
\newcommand{\ea}{\end{aligned}}
\newcommand{\be}{\begin{enumerate}}
\newcommand{\ee}{\end{enumerate}}
\newcommand{\bsm}{\left(\begin{smallmatrix}}
\newcommand{\esm}{\end{smallmatrix}\right)}                   
\newcommand{\bpm}{\begin{pmatrix}}
\newcommand{\epm}{\end{pmatrix}}
\newcommand{\barr}{\begin{displaymath}\begin{array}{cccc}}
\newcommand{\earr}{\end{array}\end{displaymath}}
\newcommand{\barrl}{\begin{displaymath}\begin{array}{lcl}}
\newcommand{\earrl}{\end{array}\end{displaymath}}
\newcommand{\barl}{\begin{displaymath}\begin{array}{l}}
\newcommand{\earl}{\end{array}\end{displaymath}}
\newcommand{\bxym}{ \begin{displaymath}\xymatrix }
\newcommand{\exym}{\end{displaymath}}
\newcommand{\bcd}{\begin{center}\begin{tikzcd}}
\newcommand{\ecd}{\end{tikzcd}\end{center}}
\newcommand{\R}{\operatorname{R}^{\bullet}}
%\newcommand{\sslash}{\mathbin{/\mkern-6mu/}}
\newcommand{\tr}{{\rm tr}}
\newcommand{\Isom}{\text{Isom}}
\newcommand{\pr}{\operatorname{pr}}
\newcommand{\fgt}{\operatorname{fgt}}
\newcommand{\ev}{\operatorname{ev}}
\newcommand{\codim}{\operatorname{codim}}
\newcommand{\rk}{\operatorname{rk}}
\newcommand{\vdim}{\operatorname{vdim}}
\newcommand{\Bl}{\operatorname{Bl}}
\newcommand{\ildef}[1]{\emph{#1}}
\newcommand{\om}[1]{\mathcal{#1}}
\newcommand{\h}{\operatorname{h}}
\newcommand{\vv}{\operatorname{v}}
\newcommand{\Aut}{\operatorname{Aut}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\operatorname{N}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\dvr}{\Delta}

\theoremstyle{definition}
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem*{teo*}{Theorem}
\newtheorem{ipotesi}{ipotesi}
\newtheorem*{nota}{Nota}
\newtheorem{claim}{Claim}
\newtheorem{question}[thm]{Question}
\newtheorem{conj}[thm]{Conjecture}

\newtheorem{innercustomthm}{Theorem}
\newenvironment{customthm}[1]
  {\renewcommand\theinnercustomthm{#1}\innercustomthm}
  {\endinnercustomthm}

\theoremstyle{definition}
\newtheorem{example}[thm]{Example}
\newtheorem{ex}[thm]{Example}
\newtheorem{dfn}[thm]{Definition}
\newtheorem{definition}[thm]{Definition}
\newtheorem{aside}[thm]{Aside}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{com}[thm]{Comment}
\newtheorem{num}{Number}
\newtheorem*{sketch}{Sketch}
\newtheorem*{rem}{Remark}
\newtheorem*{aside*}{Aside}
\newtheorem*{acknowledgements}{Acknowledgements}

\newcommand{\ilemph}[1]{\emph{#1}}

\setcounter{tocdepth}{1}

\newcommand{\todo}[1]{\vspace{5mm}\par \noindent
\framebox{\begin{minipage}[c]{0.95 \textwidth} \tt #1\end{minipage}} \vspace{5mm} \par}

\def\ti{-\allowhyphens}
\newcommand{\thismonth}{\ifcase\month % case 0 --- impossible!
  \or January\or February\or March\or April\or May\or June%
  \or July\or August\or September\or October\or November%
  \or December\fi}
\newcommand{\thismonthyear}{{\thismonth} {\number\year}}
\newcommand{\thisdaymonthyear}{{\number\day} {\thismonth} {\number\year}}

\usepackage[T1]{fontenc}
\usepackage{newpxtext,newpxmath}

%Dedica: A chi ha lasciato col suo passaggio una voragine nel mio cuore \\ pulsante di mancanza, \\ e a chi si sforza ogni giorno di colmarla \\ senza mai stancarsi di dare amore laddove tanto abbisogna

\title[Thesis]{Alternative compactifications in low genus Gromov-Witten theory}
\author{Luca Battistella}
\begin{document}

\maketitle
\appendixtitletocoff
\tableofcontents

\section{Reduced invariants and the Li-Zinger's formula}
Contrary to the genus zero case, $\M{1}{n}{\PP^N}{d}$ is not a smooth stack; in fact it is not even equidimensional. A classical example is given by $\M{1}{0}{\PP^2}{3}$:
\begin{itemize}
 \item smooth planar cubics are elliptic curves by the degree-genus formula; viewing them as $E\hookrightarrow \PP^2$ gives a component of dimension $9$ of $\M{1}{0}{\PP^2}{3}$, often referred to as the \emph{main} component;
 \item a contracted elliptic curve attached to a rational tail that normalises a nodal cubic determines the generic point of a different component of dimension $10$, which I am going to denote by $D^1(\PP^2,3)$;
 \item finally a contracted genus one curve with two rational tails parametrising the union of a line and a quadric in $\PP^2$ describes the generic element of yet another $9$-dimensional component, that I shall denote by $D^2(\PP^2,3)$.
\end{itemize}
Furthermore, the boundary of the main component admits a neat description: $\M{1}{0}{\PP^2}{3}^{\mathrm{main}}\cap D^1(\PP^2,3)$ consists of those maps where the rational tail normalises a cusp, and the elliptic curve is contracted exactly to the singular point (this has dimension $8$, thus being a divisor in \emph{main}); while $\M{1}{0}{\PP^2}{3}^{\mathrm{main}}\cap D^2(\PP^2,3)$ has the line tangent to the conic.

The description above generalises indeed to all moduli space of maps to $\PP^N$ in genus one:
besides the \emph{main component}, which is the closure of the locus of maps from a smooth elliptic curve, for every positive integer $k$ and partition $\lambda\vdash d$ into $k$ positive parts, there is an irreducible \emph{boundary component} $D^{\lambda}(\PP^N,d)$ defined to be the closure of the locus where:
\begin{enumerate}[label=(\roman*)]
\item the source curve is obtained by gluing a smooth $k$-pointed elliptic curve $E$ with as many rational tails $R_i\cong\PP^1,\ i=1,\ldots,k$,
\item the map contracts the elliptic curve $E$ to a point, 
\item and it has degree $\lambda_i$ on the rational tail $R_i$.
\end{enumerate}
Indeed $D^{\lambda}(\PP^N,d)$ is the image of the gluing morphism from
\[\left(\oM_{1,k}\times\prod_{i=1}^k\M{0}{1}{\PP^N}{\lambda_i}\right)\times_{(\PP^N)^k}\PP^N.\]
I will denote by $D^k$ the union of all $D^{\lambda}(\PP^N,d)$ where $\lambda$ has $k$ parts. Notice that an analogous description holds in the case of a positive number of markings, except that the combinatorial data should also include a partition $\mu\vdash n$ into $k+1$ parts (the $0$-th of which telling how many points lie on $E$).

 %We then have:
\begin{prop}\label{prop:components} Let the smallest connected arithmetic genus one subcurve go under the name of \emph{core} or \emph{circuit}.
\begin{enumerate}
 \item The ones above are all the irreducible components of $\oM_1(\PP^N,d)$: 
\[\oM_1(\PP^N,d)=\oM_1(\PP^N,d)^{\rm{main}}\cup\bigcup_{\lambda}D_{\lambda}(\PP^N,d).\]
\item A map $[f]$ lies in \emph{the boundary of the main component}  if and only if:
\begin{itemize}[leftmargin=0cm]
\item $f$ is non-constant on at least one irreducible component of the core,
\item or, if $f$ contracts the core, writing $C=E\ {}_{\mathbf p}\!\sqcup_{\mathbf q}\bigsqcup_{i=1}^k R_i$ with $E$ the \emph{maximal} contracted subcurve genus one, then $\{\operatorname{d}\!f(T_{q_i}R_i)\}_{i=1}^k$ are \emph{linearly dependent} in $T_{f(E)}\PP^r$.
\end{itemize}
In this case we say that $[f]$ is smoothable.
\end{enumerate}
\end{prop}
 
This is essentially due to R. Vakil and A. Zinger, see \cite[Lemma~5.9]{Vre} \cite{VZpreview} \cite[???]{VISC}. I shall later discuss a proof of the second fact based on local equations for the moduli space.

Let me carry the comparison to the genus zero situation one step further: assume we are interested in the Gromov-Witten theory of a complete intersection in $\PP^N$, say a hypersurface $X$ of degree $l$, cut out by a certain section $s\in H^0(\PP^N,\OO_{\PP^N}(l))$. Letting $(\pi,f)\colon \mathcal C_{0,n}(\PP^N,d) \to \M{0}{n}{\PP^N}{d}\times \PP^N$ be the universal curve and stable map, recall that there is an induced section $\tilde{s}$ of the sheaf $E=\pi_*f^*\OO_{\PP^N}(l)$ on $\M{0}{n}{\PP^N}{d}$, which vanishes along $\M{0}{n}{X}{d}$; in fact more is true: $E$ is a vector bundle of rank $dl+1$ (by cohomology and base-change, and a Riemann-Roch computation) and after shifting it provides us with a perfect obstruction theory for the inclusion $\iota\colon \M{0}{n}{X}{d}\hookrightarrow\M{0}{n}{\PP^N}{d}$, so that the following result holds.

\begin{prop}\cite{CKL,KKP}
 With notation as above,
 \[\iota_*\virt{\M{0}{n}{X}{d}}=c_{dl+1}(E)\cap [\M{0}{n}{\PP^N}{d}].\]
\end{prop}
In particular, this result makes the restricted Gromov-Witten invariants of $X$ into \emph{twisted} Gromov-Witten invariants of projective space, which are computable e.g. by localisation \cite{Kon}.

Again the situation in genus one is much more intricate: $\pi_*f^*\OO_{\PP^N}(l)$ generically has rank $dl$ on the main component, but the rank jumps to $dl+1$ on the boundary, where the elliptic curve is contracted - as can be seen by constancy of the Euler characteristic and the fact that $\operatorname{R}^1\pi_*f^*\OO_{\PP^N}(l)$, that always satisfies cohomology and base-change, is supported on such boundary loci. In other words, the natural obstruction theory for $\M{1}{n}{X}{d}\hookrightarrow\M{1}{n}{\PP^N}{d}$ is not perfect.

A possible approach to this problem is the one taken by J. Li, R. Vakil and A.Zinger in a series of papers \cite{???}: roughly, they produce a desingularisation $\VZ{n}{\PP^N}{d}$ of the main component, on which the cone $\pi_*f^*\OO_{\PP^N}(l)$ is seen to contain a vector bundle $E$ of rank $dl$, and for a hypersurface $X_l\subseteq \PP^N$ as before (more generally for a projective complete intersection) they define \emph{reduced invariants} by integrating against
\[\redu{\iota_* \VZ{n}{X}{d}}:= c_{dl}(E)\cap [\VZ{n}{\PP^N}{d}].\]
In particular reduced invariants may again be computed by torus localisation \cite{Zinger-CYhyp,APopa}. Let me describe Vakil and Zinger's construction more precisely: it is an iterated blow-up that makes all the boundary components intersect main in a divisor (within the latter). Let $\Mwt$ denote the stack of prestable curves with a weight assignment, namely to every irreducible component in the fiber a non-negative integer is associated in a way compatible with specialisation morphisms: $\Mwt$ is \'etale, non-separated over $\MM_1$ and it was first considered in \cite{Costello-thesis}; by an abuse of notation I will keep denoting by $\Mwt$ the open, bounded locus where the curve is weighted-stable, i.e. every rational component of weight zero has at least three special points. $\M{1}{n}{\PP^N}{d}$ admits a map to $\Mwt$ by retaining only the degree of the map. Let $\Theta_k\subseteq \Mwt$ denote the closure of the locus where the elliptic curve has weight zero, and $k$ rational tails of positive weight attached to it. Define $\MM^{(0)}=\Mwt$ and $\MM^{(k)}$ iteratively as the blow-up of the strict transform of $\Theta_k$ in $\MM^{(k-1)}$. Notice that the blow-up loci are always smooth, hence so is $\MM^{(k)}$ for every $k$; also, by weighted-stability, for every fixed total degree $d$ the procedure stops after finitely many steps: denote by $\widetilde{\MM}$ the end result. Form the cartesian diagram
\bcd
\tVZ{n}{\PP^N}{d}\ar[d]\ar[r]\ar[dr,phantom,"\Box"] & \M{1}{n}{\PP^N}{d}\ar[d] \\
\widetilde{\MM}\ar[r] & \Mwt
\ecd
Now the pullback of any boundary component of $\M{1}{n}{\PP^N}{d}$ has the same dimension in $\tVZ{n}{\PP^N}{d}$ and intersects its main component (which is denoted by $\VZ{n}{\PP^N}{d}$ and is smooth \cite{???}) in a Cartier divisor. Denoting $\mathcal L=\tilde f^*\OO_{\PP^N}(1)$ on the universal curve, notice that $\R\pi_*\mathcal L$ may be resolved locally by picking a smooth section $\mathcal A$ of the universal curve passing through the core and writing:
\[0\to \tilde\pi_*\mathcal L\to \tilde\pi_*(\mathcal L\otimes \OO_{\mathcal C}(\mathcal A))\xrightarrow{\mathrm{res}_{\mathcal A}} \tilde\pi_*(\mathcal L(\mathcal A)_{|\mathcal A})\to \operatorname{R}^1\tilde\pi_*\mathcal L\to 0\]
By restricting to $\VZ{n}{\PP^N}{d}$ we see then that the image of the middle arrow is $\tilde\pi_*(\mathcal L(\mathcal A)_{|\mathcal A})(-\Xi)$ where $\Xi$ denotes the intersection of the main component of he Vakil-Zinger's desingularisation with the union of the boundary components, hence $\tilde\pi_*\mathcal L$ is a vector bundle (being expressed as the kernel of a vector bundle morphism). A similar argument works for all the tensor powers of $\mathcal L$, and in particular we let $E:=\tilde\pi_*\mathcal L^{\otimes l}$. The previous discussion is not completely accurate, but can be made so by studying the arrow $\mathrm{res}_{\mathcal A}$ in local coordinates \cite[???]{HL}.

It is clear from the construction above that reduced invariants shoud have a better enumerative meaning than ordinary Gromov-Witten invariants, in the sense that they discard most boundary contributions from nodal curves. In the realm of symplectic geometry, it has been proven by Li and Zinger \cite{LZ} that for every \emph{primary} insertion $(\delta_1,\ldots,\delta_n)\in H^*(X)^{\otimes n}$ and curve class $\beta\in H^+_2(X)$
\[
 \langle \delta_1,\ldots,\delta_n \rangle^X_{1,n,\beta}-\langle \delta_1,\ldots,\delta_n \rangle^{X,\mathrm{red}}_{1,n,\beta}=\begin{cases}
 0 & \text{if } \dim(X)=2, \\
 \frac{2-K_X\cdot\beta}{24}\langle \delta_1,\ldots,\delta_n \rangle^X_{0,n,\beta} & \text{if } \dim(X)=3.\end{cases}
\]
Li-Zinger's equation tells us that in the case of a threefold, which is the most natural one where to look for such a comparison result because the virtual dimension (hence the meaningful insertions) does not depend on the genus, the difference between ordinary and reduced genus one invariants is given by the corresponding genus zero invariant multiplied by a certain correction factor. The relation has been proved in algebraic geometry for the quintic threefold \cite{CL}, and it is an adaptation of their work that I am going to discuss in the next few sections. Together with Cristina Manolache and Tom Coates I am also working towards a different proof of the formula: the key issue is to prove that the components of the intrinsic normal cone supported on the boundary components compare well (as in \cite{Manolache-push}) to their genus zero relatives - or rather excluding those that do not contribute at all. I shall not attempt a detailed discussion here; I would rather work out the case of projective spaces of low dimension, which can be dealt with entirely by hand. Let me recall the following
\begin{lemma}\cite[Proposition 1.8]{Ful}
Let $U\overset{j}{\hookrightarrow} X \overset{i}{\hookleftarrow} Z$ be complementary open and closed subvarieties. Then the following sequence is exact:
\[A_k(Z)\overset{i^*}{\to} A_k(X)\overset{j^*}{\to} A_k(U)\to 0\]
\end{lemma}
This means that, whenever we are looking for a virtual class of dimension $d$, we are welcome to discard any closed suscheme of dimension less than $d$. Furthermore cones and Gysin pullbacks behave well under restriction to open subsets \cite[Proposition 4.2(b) and Theorem 6.2(b)]{Ful}. Also $\tVZ{n}{\PP^N}{d}\to \M{1}{n}{\PP^N}{d}$ is virtually birational, and all insertions come from downstairs, so we do not really need to work on the Vakil-Zinger desingularisation if we do not want to.  

Let me start by loooking at $\M{1}{n}{\PP^1}{d}$. Except for $d=1$, where the main component is empty, there are $n+2$ components: the main one and a boundary component for every partition of $n$ into two parts, which is the image of gluing \[\oM_{1,k+1}\times\M{0}{n-k+1}{\PP^1}{d}.\]
All components have the same dimension, which is also equal to the virtual dimension; this in particular means that we can discard all the intersections, thus every component is smooth. Notice that from the exact triangle
\[ E^\bullet_{\oM(\PP^1)/\MM}\to E^\bullet_{\oM(\PP^1)}\to \rho^*T^\bullet_{\MM}\overset{[1]}{\to}\]
the relative obstruction space $\mathbb E^\vee\boxtimes \ev_q^*T_{\PP^1}$ - where $\mathbb E$ is the Hodge bundle and $q$ is the gluing node - cancels out with the normal bundle of the boundary divisor in the moduli space of curves, which is $\mathbb L_{q,E}^\vee\boxtimes \mathbb L_{q,R}^\vee$: notice that the difference between $\lambda_1$ and $\psi_1$ (when there are markings on the elliptic tail) is supported precisely on the intersections between two boundary components, while $\operatorname{d}\!f_q$ gives an isomoprhism $\mathbb L_{q,R}^\vee\xrightarrow{\sim}\ev_q^*T_{\PP^1}$, except when the gluing node is a ramification point for the map, which happens at the intersection with main by Proposition \ref{prop:components}. This shows that the virtual class is the sum of the fundamental classes of all the components. Clearly no boundary component will contribute to the primary invariants. On the other hand it is also clear that any descendant invariant will determine (at most) one boundary component contributing to it.

The case of $\PP^2$ is slightly more complicated: the boundary component $D^1$ has excess dimension $1$, and two irreducible components $D^{\lambda=(d),\mu=(A_0,A_1)}$ and $D^{\lambda,\mu'}$ intersect if and only if $A_0\subseteq A_0'$ and $A_1'\subseteq A_1$, or viceversa; in this case the dimension of the intersection is equal to the virtual dimension. Finally $D^2$ also has dimension equal to the virtual one. Notice that the restriction of the intrinsic normal cone to $D^1\setminus \M{1}{n}{\PP^2}{d}^{\mathrm{main}}$ is pulled back from the boundary divisor in $\MM_{1,n}^{\mathrm{wt}}$, hence it is a line bundle and its components are in bijection with those of $D^1$; we may therefore study it componentwise. It is an easy Chern class computation that \[c_1\left(\frac{\mathbb E^\vee\boxtimes \ev_q^*T_{\PP^2}}{\mathbb L_{q,E}^\vee\boxtimes \mathbb L_{q,R}^\vee}\right)=3\cdot1\boxtimes\ev_q^*H+2\cdot\lambda_1\boxtimes1-\psi\boxtimes1-1\boxtimes\psi\]
It follows from arguments similar to the above ones that $D^2$ contributes with its fundamental class. We may wrap it all up in the following formula:
\begin{multline*}
 \langle \tau_{h_1}(H^{k_1}),\ldots,\tau_{h_n}(H^{k_n})\rangle^{\PP^2}_{1,n,d}= \langle \tau_{h_1}(H^{k_1}),\ldots,\tau_{h_n}(H^{k_n})\rangle^{\PP^2,\mathrm{red}}_{1,n,d}+\\
 \hspace{-2cm}\sum_{A_0\coprod A_1=[n]}\biggr(\langle \psi^{h^0_1},\ldots,\psi^{h^0_{n_0}},1\rangle^{\{*\}}_{1,A_0\cup \{q_E\}}\langle 3H^{\sum _{i\in A_0}k_i+1}-\tau_1(H^{\sum_{i\in A_0}k_i}),\tau_{h^1_1}(H^{k^1_1}),\ldots,\tau_{h^1_{n_1}}(H^{k^1_{n_1}})\rangle^{\PP^2}_{0,\{q_R\}\cup A_1,d}\\
 + \langle \psi^{h^0_1},\ldots,\psi^{h^0_{n_0}},2\lambda_1-\psi\rangle^{\{*\}}_{1,A_0\cup \{q_E\}}\langle H^{\sum _{i\in A_0}k_i},\tau_{h^1_1}(H^{k^1_1}),\ldots,\tau_{h^1_{n_1}}(H^{k^1_{n_1}})\rangle^{\PP^2}_{0,\{q_R\}\cup A_1,d}\biggr)+\\
 \hspace{-4.3cm}\sum_{\substack{A_0\coprod A_1\coprod A_2=[n]\\ d_1+d_2=d:\ d_1,d_2>0}}\sum_{j=0}^2\langle \psi^{h^0_1},\ldots,\psi^{h^0_{n_0}},1,1\rangle^{\{*\}}_{1,n_0+2}\langle H^{j+\sum _{i\in A_0}k_i},\tau_{h^1_1}(H^{k^1_1}),\ldots,\tau_{h^1_{n_1}}(H^{k^1_{n_1}})\rangle^{\PP^2}_{0,1+n_1,d_1}\langle H^{2-j},\tau_{h^2_1}(H^{k^2_1}),\ldots,\tau_{h^2_{n_2}}(H^{k^2_{n_2}})\rangle^{\PP^2}_{0,1+n_2,d_2}
\end{multline*}
Notice in particular that ordinary and reduced invariants coincide for primary insertions (using the string equation).

Analogous computations work for $\PP^3$: $D^1$ has excess dimension two and the obstruction bundle is \[\frac{\mathbb E^\vee\boxtimes \ev_q^*T_{\PP^3}}{\mathbb L^\vee_{q,E}\boxtimes \mathbb L^\vee_{q,R}}\]
$D^2$ has excess dimension one and obstructions \[\frac{\mathbb E^\vee\boxtimes \ev_q^*T_{\PP^3}}{\mathbb L^\vee_{q_1,E}\boxtimes \mathbb L^\vee_{q,R_1}\oplus\mathbb L^\vee_{q_2,E}\boxtimes \mathbb L^\vee_{q,R_2}}\]
while $D^3$ has dimension equal to the virtual dimension. A Chern class computation implies (schematic notation suggested by N. Nabijou):
\begin{multline*}
 \virt{\M{1}{n}{\PP^3}{d}}=[\reduced]+ 4[\Dunouno]+4[\Dunodue]+\\
 -3[\Dunotre]-3[\Dunoquat]+[\Dunocin]+2[\Dunosei]+\\
 [\Dunoset]+3[\Dunoott]-8[\Dunonov]+6[\Dunodiec]+\\
 4[\Ddueuno]-3[\Dduedue]+[\Dduetre]+[\Dduequat]+\\
 [\Dduecin]+[\Dduesei]+[\Dtre]
\end{multline*}
If we restrict our attention to primary invariants, the only surviving terms are:
\begin{multline*}
 [\reduced]+ 4[\Dunouno]-3[\Dunotre]-3[\Dunoquat]+\\
 [\Dunocin]+2[\Dunosei]+3[\Dunoott]-8[\Dunonov]
\end{multline*}
We may then compute the following contributions:
\begin{enumerate}
 \item gives the reduced invariants,
 \item $4\langle\psi\rangle_{1,1}\langle H,-\rangle^{\PP^3}_{0,n+1,d}=\frac{4d}{24} GW_0$ by divisor,
 \item $-3\langle\lambda_1\psi,1\rangle_{1,2}\langle -\rangle^{\PP^3}_{0,n,d}=\frac{-3n}{24} GW_0$ since there are $n$ choices for the marking on the genus one curve,
 \item $-3\langle\lambda_1\rangle_{1,1}\langle \psi,-\rangle^{\PP^3}_{0,n+1,d}=\frac{-3(n-2)}{24} GW_0$ by dilaton,
 \item $\langle\psi^2,1\rangle_{1,2}\langle -\rangle^{\PP^3}_{0,n,d}=\frac{n}{24} GW_0$,
 \item $2\langle\psi\rangle_{1,1}\langle \psi,-\rangle^{\PP^3}_{0,n+1,d}=\frac{2(n-2)}{24} GW_0$ by dilaton,
 \item vanishes since $\langle\lambda_1^2,1\rangle_{1,2}=0$,
 \item $-8\langle\lambda_1\rangle_{1,1}\langle H,-\rangle^{\PP^3}_{0,n+1,d}=\frac{-8d}{24} GW_0$ by divisor.
\end{enumerate}
Summing up we obtain the following:
\begin{prop}[Li-Zinger formula for $\PP^3$] \[\langle \delta_1,\ldots,\delta_n \rangle^{\PP^3}_{1,n,d}=\langle \delta_1,\ldots,\delta_n \rangle^{\PP^3,\mathrm{red}}_{1,n,d}+\frac{2-4d-3n}{24}\langle \delta_1,\ldots,\delta_n \rangle^{\PP^3}_{0,n,d}.\] \end{prop}
Notice that this is slightly different from Li-Zinger's original formula. An alternative approach would be comparing every boundary component to its genus zero relative by virtual pushforward: if we are only interested in primary insertions, notice that the components of $D^1$ such that more than one marking dwells on the elliptic curve will not contribute, since the excess bundle has rank two.

\section{Genus one singularities}
A different approach to reducing the complexity of $\M{1}{n}{\PP^N}{d}$ is the one followed by M. Viscardi in \cite{VISC}, building on work of D.I. Smyth on the minimal model program for $\oM_{1,n}$ \cite{SMY1}. Rather than blowing up and desingularising the main component, the idea is to collapse a number of boundary components, only keeping their intersection with main and the boundary components of smaller dimension. Vakil's description of the smoothable elements of $\M{1}{n}{\PP^N}{d}$ (see Proposition \ref{prop:components}(2)) suggests to do so by allowing maps from more singular (than nodal) curves, and simultaneously making their semistable models unstable, in order to preserve the separatedness of the moduli space.

The easiest example is the following: the cusp
\[\kk[\![x,y]\!]/(y^2-x^3)\]
is the only unibranch singularity of genus one (meaning that there exists a flat family of smooth elliptic curves degenerating to an irreducible curve of geometric genus $0$ and with only one singular point, around which the curve is formally isomorphic to the spectrum of the ring above). It is a well-known computation \cite[\S 3.C]{HM} that the semistable reduction of the cusp has a rational tail (normalising the singularity) attached to an elliptic curve at the preimage of the singular point; this indicates that we should make curves of genus one with only one special point unstable. On the other hand the only singularities appearing in the fibers of the miniversal deformation of the cusp are nodes, hence for a curve being \emph{at worst cuspidal} (i.e. smooth, nodal or cuspidal) is an open condition. Consider then the following:
\begin{dfn}
 The moduli space of $1$-stable maps $\Mone{n}{X}{\beta}$ parametrises $f\colon (C,\mathbf p)\to X$ such that
 \begin{enumerate}
  \item $(C,p_1,\ldots,p_n)$ is at worst cuspidal, of arithmetic genus one, and $\mathbf p$ is an $n$-tuple of smooth and disjoint sections;
  \item if $C_0$ is a minimal connected subcurve of $C$ contracted by $f$, the number of markings on $C_0$ added to the number of intersections of $C_0$ with $\overline{C\setminus C_0}$ is at least $3$ if $p_a(C)=0$ and \emph{at least $2$} if $p_a(C)=1$;
  \item $f_*[C]=\beta\in H^+_2(X)$ and $\Aut(C,f)$ is finite.
 \end{enumerate}
\end{dfn}
\begin{lemma}
 $\Mone{n}{X}{\beta}$ is a proper DM stack of finite type over $\kk$.
\end{lemma}
For example $\oM^{(1)}(\PP^2,3)$ has only two components, since $D^1$ is gone! On the other hand the intersection of $D^1$ with main and with $D^2$ has been filled up by maps from cuspidal curves. This is the main instance of Smyth-Viscardi's spaces that I am going to be concerned with, but there is a well-developed theory which I shall quickly review here.

\begin{dfn}
 Let $(C,p)$ be the germ of a curve singularity, with normalisation $\nu\colon\tilde{C}\to C$. Let me denote by $m$ the number of branches of $C$ at $p$ (i.e. irreducible components of $\tilde{C}$) and by $\delta=\dim_{\kk}(\nu_*\OO_{\tilde{C}}/\OO_C)$. The \emph{genus} of $(C,p)$ is defined by \[g=\delta-m+1.\]
\end{dfn}
\begin{prop}\cite[Proposition A.3]{SMY1}
 There is up to isomorphism only one germ of Gorenstein curve singularity $(C,p)$ of genus one with $m$ branches, namely
 \[\hat\OO_{C,p}\simeq\begin{cases} \kk[\![x,y]\!]/(y^2-x^3) & \text{(cusp) if } m=1, \\ \kk[\![x,y]\!]/y(y-x^2) &  \text{(tacnode) if } m=2,\end{cases}\]
 and the germ of $m$ generic lines through the origin in $\Aaff^{m-1}$ for $m\geq 3$. It is called the \emph{elliptic $m$-fold point}.
\end{prop}
All these singularities are smoothable (see the proof of \cite[Theorem 3.8]{SMY1}). Smyth studied their semistable models: pick a smoothing $\bar{\mathcal C}$ of the $m$-fold elliptic point and consider its semistable model with \emph{regular} total space $\tilde{\mathcal C}$; let $(E,q_1,\ldots,q_m)$ be the exceptional locus of the contraction (the fiber over the $m$-fold elliptic point) marked with its intersection with the rest of the curve ($m$ rational trees). Call a semistable genus one curve $(E,q_1,\ldots,q_m)$ a \emph{semistable tail} if it arises in this way. Smyth shows \cite[Proposition 2.12]{SMY1} that semistable tails can be characterised combinatorially as those curves such that the distance (on the dual graph) from $q_i$ to the core of $E$ is constant for all $i=1,\ldots,m$ (\emph{balancing condition}). The idea is that $\bar{\mathcal C}$ is a normal surface, and it is Gorenstein if and only if the central fiber is. In this case, denoting by $\phi\colon \tilde{\mathcal C}\to\bar{\mathcal C}$ the contraction, $\phi^*\omega_{\bar{\mathcal C}}=\omega_{\tilde{\mathcal C}}(D)$ for some divisor $D$ supported on the exceptional locus $E$ and such that $\omega_{\tilde{\mathcal C}}(D)_{|E}\simeq\OO_E$; we can find appropriate weights on the components of $E$ such that this holds precisely in the balanced case. On the other hand, if balancing holds, we may contract $E$ by applying the Proj construction to $\omega_{\tilde{\mathcal C}}(D)$ (possibly twisted by some sections of $\tilde{\mathcal C}$ far away from $E$) as above, and then show that the resulting $\bar{\mathcal C}$ is Gorenstein by relating its dualising sheaf to the $\OO_{\bar{\mathcal C}}(1)$ from the Proj construction.


\section{p-fields, local equations and splitting of the cone}

\section{On the relative problem}


\bibliographystyle{alpha}
\bibliography{the}

\end{document}